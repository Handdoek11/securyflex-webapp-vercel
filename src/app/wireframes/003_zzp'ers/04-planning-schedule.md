# ZZP Planning - Schedule & Shift Management

## Overzicht
Het Planning scherm geeft ZZP'ers een compleet overzicht van hun shifts, beschikbaarheid en werktijden. Het ondersteunt zowel week- als maandoverzicht met CAO compliance monitoring en performance tracking.

## Functionaliteit
- **Shift overzicht**: Komende, actieve en voltooide shifts
- **Week/maand navigatie**: Flexibele tijdsperiode weergave
- **CAO compliance**: Automatische controle op rusttijden
- **Beschikbaarheid**: Instellen van beschikbare periodes
- **Performance tracking**: Uren, verdiensten en punctualiteit
- **Quick actions**: Direct check-in, navigation, shift details

## Key Features
- **Real-time updates**: Live shift wijzigingen en nieuwe toewijzingen
- **Time tracking**: Nauwkeurige registratie van gewerkte uren
- **Calendar sync**: Integratie met native agenda apps
- **Availability management**: Proactief beschikbaarheid instellen

---

## 🔲 Mobile Versie (375px - 768px)

### Planning Overview - Week View
```
┌─────────────────────────────────────┐
│  [←] Planning       [Week] [Maand]  │
│                     [◄ Nov 2024 ►]  │
├─────────────────────────────────────┤
│                                     │
│  Ma │Di │Wo │Do │Vr │Za │Zo       │
│  25 │26 │27 │28 │29 │30 │01       │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📅 Maandag 27 November      │   │
│  │                             │   │
│  │ ┌─────────────────────────┐ │   │
│  │ │ 08:00-16:00             │ │   │
│  │ │ Schiphol Security       │ │   │
│  │ │ Terminal 3 Controle     │ │   │
│  │ │                         │ │   │
│  │ │ Status: ✅ Bevestigd    │ │   │
│  │ │ Tarief: €16/uur         │ │   │
│  │ │                         │ │   │
│  │ │ [Check-in] [Details]    │ │   │
│  │ │ [Navigate] [Contact]    │ │   │
│  │ └─────────────────────────┘ │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📅 Dinsdag 28 November      │   │
│  │                             │   │
│  │ ┌─────────────────────────┐ │   │
│  │ │ 14:00-22:00             │ │   │
│  │ │ Ajax Arena              │ │   │
│  │ │ Champions League Match  │ │   │
│  │ │                         │ │   │
│  │ │ Status: ⏳ Wacht op     │ │   │
│  │ │         bevestiging     │ │   │
│  │ │ Tarief: €18/uur         │ │   │
│  │ │                         │ │   │
│  │ │ [Details] [Contact]     │ │   │
│  │ └─────────────────────────┘ │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📅 Woensdag 29 November     │   │
│  │                             │   │
│  │     🕳️ Vrije dag            │   │
│  │                             │   │
│  │ [+ Beschikbaarheid toevoegen]│   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│ [🏠][💼][💬][📅][👤]             │
│ Dashboard Jobs Chat Planning Profiel│
└─────────────────────────────────────┘
```

### Weekly Summary View
```
┌─────────────────────────────────────┐
│  [←] Week 48 Overzicht              │
│                     [◄ Nov 2024 ►]  │
├─────────────────────────────────────┤
│                                     │
│  📊 Week Statistieken               │
│                                     │
│  ┌─────────────────────────────┐   │
│  │   Gewerkte Uren: 38h        │   │
│  │   Verdienst: €684           │   │
│  │   Shifts: 5 completed       │   │
│  │   Punctualiteit: 100%       │   │
│  └─────────────────────────────┘   │
│                                     │
│  📈 Uren Verdeling:                 │
│  ┌─────────────────────────────┐   │
│  │ Ma ████████ 8h              │   │
│  │ Di ████████ 8h              │   │
│  │ Wo ████████ 8h              │   │
│  │ Do ████████ 6h              │   │
│  │ Vr ████████ 8h              │   │
│  │ Za ░░░░░░░░ 0h              │   │
│  │ Zo ░░░░░░░░ 0h              │   │
│  └─────────────────────────────┘   │
│                                     │
│  ✅ CAO Compliance                  │
│  • Minimale rust: ✅ 11h           │
│  • Maximale werkdag: ✅ 8h         │
│  • Weekend rust: ✅ 35h            │
│  • Wekelijkse max: ✅ 48h          │
│                                     │
│  ⭐ Performance Score: 94%          │
│  • Check-in op tijd: 100%          │
│  • Shift voltooiing: 100%          │
│  • Communicatie: 90%               │
│  • Klant feedback: 4.8/5           │
│                                     │
│  💰 Verwachte Betaling:             │
│  Finqle: €684 binnen 24 uur        │
│                                     │
├─────────────────────────────────────┤
│ [🏠][💼][💬][📅][👤]             │
│ Dashboard Jobs Chat Planning Profiel│
└─────────────────────────────────────┘
```

### Month View
```
┌─────────────────────────────────────┐
│  [←] Planning       [Week] [Maand]  │
│                     [◄ Nov 2024 ►]  │
├─────────────────────────────────────┤
│                                     │
│  November 2024                      │
│                                     │
│ Ma Di Wo Do Vr Za Zo               │
│          1  2  3                   │
│  4  5  6  7  8  9 10               │
│ 11 12 13 14 15 16 17               │
│ 18 19 20 21 22 23 24               │
│ 25 26●27●28●29 30◯01               │
│                                     │
│ ● = Shift ingepland                 │
│ ◯ = Beschikbaar                     │
│ ░ = Niet beschikbaar               │
│                                     │
│  📊 Maand Statistieken:             │
│  ┌─────────────────────────────┐   │
│  │ Totaal uren: 152h           │   │
│  │ Verdienst: €2,736           │   │
│  │ Shifts: 19 completed        │   │
│  │ Gemiddeld/dag: 7.6h         │   │
│  │ Werkdagen: 20               │   │
│  └─────────────────────────────┘   │
│                                     │
│  📈 Trends:                         │
│  • Vorige maand: +8% uren          │
│  • Vorige maand: +12% verdienst    │
│  • Klant rating: ⭐4.8 (+0.1)      │
│                                     │
│  🎯 Doelen December:                │
│  • Target uren: 160h (48h/week)    │
│  • Target verdienst: €2,880       │
│  • Nieuwe certificaat: VCA        │
│                                     │
├─────────────────────────────────────┤
│ [🏠][💼][💬][📅][👤]             │
│ Dashboard Jobs Chat Planning Profiel│
└─────────────────────────────────────┘
```

### Availability Management
```
┌─────────────────────────────────────┐
│  [←] Beschikbaarheid Instellen      │
├─────────────────────────────────────┤
│                                     │
│  📅 Week van 2-8 December           │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ Maandag 2 December          │   │
│  │                             │   │
│  │ Van: [06:00] Tot: [22:00]   │   │
│  │ ☑️ Beschikbaar              │   │
│  │                             │   │
│  │ Voorkeur locaties:          │   │
│  │ ☑️ Amsterdam (0-25km)       │   │
│  │ ☑️ Utrecht (25-50km)        │   │
│  │ ☐ Rotterdam (50km+)         │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ Dinsdag 3 December          │   │
│  │                             │   │
│  │ ☐ Niet beschikbaar          │   │
│  │                             │   │
│  │ Reden: Doktersafspraak      │   │
│  └─────────────────────────────┘   │
│                                     │
│  ⚙️ Standaard Instellingen:         │
│  • Minimum uurtarief: €15          │
│  • Maximum reistijd: 45 min        │
│  • Voorkeur shift types:           │
│    ☑️ Event beveiliging            │
│    ☑️ Object beveiliging           │
│    ☐ Personen beveiliging         │
│                                     │
│  ┌─────────────────────────────┐   │
│  │     💾 OPSLAAN              │   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│ [🏠][💼][💬][📅][👤]             │
│ Dashboard Jobs Chat Planning Profiel│
└─────────────────────────────────────┘
```

---

## 🖥️ Desktop Versie (1024px+)

### Desktop Calendar View
```
┌───────────────────────────────────────────────────────────────────────────────┐
│  [←] Planning Dashboard           Week 48, November 2024      [Sync Calendar]  │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│ ┌────────────────────────────────────────────────────────────────────────────┐│
│ │                          📅 WEEK KALENDER                                  ││
│ │                                                                            ││
│ │  Tijd  │ Ma 25  │ Di 26  │ Wo 27  │ Do 28  │ Vr 29  │ Za 30  │ Zo 01    ││
│ │ ──────┼────────┼────────┼────────┼────────┼────────┼────────┼──────────  ││
│ │ 06:00 │        │        │        │        │        │        │            ││
│ │ 07:00 │        │        │        │        │        │        │            ││
│ │ 08:00 │        │        │ SCHIP  │        │        │        │            ││
│ │ 09:00 │        │        │ SECURITY│       │        │        │            ││
│ │ 10:00 │        │        │ €16/u  │        │        │        │            ││
│ │ 11:00 │        │        │ T3     │        │        │        │            ││
│ │ 12:00 │        │        │ CTRL   │        │        │        │            ││
│ │ 13:00 │        │        │        │        │        │        │            ││
│ │ 14:00 │        │        │        │ AJAX   │        │        │            ││
│ │ 15:00 │        │        │        │ ARENA  │        │        │            ││
│ │ 16:00 │        │        │ [End]  │ €18/u  │        │        │            ││
│ │ 17:00 │        │        │        │ CL     │        │        │            ││
│ │ 18:00 │        │        │        │ MATCH  │        │        │            ││
│ │ 19:00 │        │        │        │        │        │        │            ││
│ │ 20:00 │        │        │        │        │        │        │            ││
│ │ 21:00 │        │        │        │        │        │        │            ││
│ │ 22:00 │        │        │        │ [End]  │        │        │            ││
│ └────────────────────────────────────────────────────────────────────────────┘│
│                                                                               │
│ ┌─────────────────────────────────┐  ┌─────────────────────────────────────┐ │
│ │       📊 WEEK STATISTIEKEN      │  │          🎯 CAO COMPLIANCE          │ │
│ │                                 │  │                                     │ │
│ │ Totaal uren: 38h               │  │ ✅ Dagelijkse rust: 11h minimum     │ │
│ │ Verdienst: €684                │  │ ✅ Maximum werkdag: 8h              │ │
│ │ Gemiddeld uurtarief: €18       │  │ ✅ Wekelijkse rust: 35h             │ │
│ │ Shifts voltooid: 5/5           │  │ ✅ Maximum werkweek: 48h            │ │
│ │ Punctualiteit: 100%            │  │                                     │ │
│ │ Klant rating: ⭐4.8/5         │  │ 📊 Compliance Score: 100%           │ │
│ │                                 │  │                                     │ │
│ │ 📈 Performance Trends:          │  │ ⚠️ Aandachtspunten:                │ │
│ │ • Vorige week: +5% uren        │  │ • Geen overtredingen               │ │
│ │ • Check-in gemiddeld: 2 min    │  │ • Optimale werktijden balans       │ │
│ │ • Zero no-shows deze maand     │  │                                     │ │
│ └─────────────────────────────────┘  └─────────────────────────────────────┘ │
│                                                                               │
│ ┌────────────────────────────────────────────────────────────────────────────┐│
│ │                         📅 AANKOMENDE SHIFTS                               ││
│ │                                                                            ││
│ │ Maandag 2 Dec  │ 08:00-16:00 │ Kantoor Utrecht    │ €16/u │ ✅ Bevestigd  ││
│ │ Dinsdag 3 Dec  │ 14:00-22:00 │ Event Amsterdam   │ €20/u │ ⏳ Wachtend   ││
│ │ Donderdag 5 Dec│ 10:00-18:00 │ Winkel Rotterdam  │ €15/u │ 📋 Concept    ││
│ │                                                                            ││
│ │ [📅 Agenda Sync] [📊 Export Data] [⚙️ Instellingen] [📲 Herinneringen]  ││
│ └────────────────────────────────────────────────────────────────────────────┘│
│                                                                               │
├───────────────────────────────────────────────────────────────────────────────┤
│ [🏠 Dashboard] [💼 Jobs] [💬 Chat] [📅 Planning] [👤 Profiel]              │
└───────────────────────────────────────────────────────────────────────────────┘
```

### Desktop Month Overview
```
┌───────────────────────────────────────────────────────────────────────────────┐
│  [←] Planning Dashboard         November 2024                [Export] [Print]  │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│ ┌─────────────────────────────────────┐ ┌─────────────────────────────────────┐│
│ │          📅 NOVEMBER 2024           │ │         📊 MAAND ANALYSE            ││
│ │                                     │ │                                     ││
│ │   Ma Di Wo Do Vr Za Zo             │ │ Totaal gewerkt: 152h                ││
│ │             1  2  3                 │ │ Totaal verdienst: €2,736            ││
│ │    4  5  6  7  8  9 10             │ │ Gemiddeld tarief: €18.00/h          ││
│ │   11 12 13 14 15 16 17             │ │ Shifts voltooid: 19/19              ││
│ │   18 19 20 21 22 23 24             │ │ Werkdagen: 20                       ││
│ │   25 26●27●28●29 30◯01             │ │                                     ││
│ │                                     │ │ 📈 Vergelijking Oktober:            ││
│ │ Legenda:                           │ │ • Uren: +8% (▲)                    ││
│ │ ● Shift voltooid                   │ │ • Verdienst: +12% (▲)              ││
│ │ ◯ Beschikbaar                      │ │ • Tarief: +€1.50/h (▲)             ││
│ │ ◐ Gedeeltelijk beschikbaar         │ │ • Rating: +0.1 stars (▲)           ││
│ │ ✗ Niet beschikbaar                 │ │                                     ││
│ │                                     │ │ 🏆 Achievements:                   ││
│ │ [◄ Oktober] [December ►]          │ │ ✅ Perfect Punctuality              ││
│ └─────────────────────────────────────┘ │ ✅ Zero Cancellations               ││
│                                         │ ✅ High Customer Rating             ││
│ ┌─────────────────────────────────────┐ │ 🎯 Top 10% Performance             ││
│ │        📊 PERFORMANCE METRICS       │ └─────────────────────────────────────┘│
│ │                                     │                                      │
│ │ Punctualiteit:     ████████ 100%   │ ┌─────────────────────────────────────┐│
│ │ Betrouwbaarheid:   █████████ 98%   │ │     🎯 DECEMBER DOELSTELLINGEN      ││
│ │ Communicatie:      ███████ 95%     │ │                                     ││
│ │ Flexibiliteit:     ██████ 92%      │ │ Target uren: 160h (40h/week)       ││
│ │ Klant feedback:    ████████ 4.8★   │ │ Target verdienst: €2,880            ││
│ │                                     │ │ Nieuwe certificering: VCA Basis    ││
│ │ 🥇 Ranking: #8 van 245 ZZP'ers    │ │ Klant rating: >4.9 stars           ││
│ │                                     │ │ Zero late check-ins                 ││
│ │ [📊 Detailed Report] [📈 Trends]   │ │                                     ││
│ │                                     │ │ Progress naar doelen:               ││
│ └─────────────────────────────────────┘ │ Uren: ████░░░░░░ 34%               ││
│                                         │ Certificaat: ██░░░░░░░░ 20%        ││
│                                         │ Rating: ███████░░░ 78%              ││
│                                         └─────────────────────────────────────┘│
│                                                                               │
├───────────────────────────────────────────────────────────────────────────────┤
│ [🏠 Dashboard] [💼 Jobs] [💬 Chat] [📅 Planning] [👤 Profiel]              │
└───────────────────────────────────────────────────────────────────────────────┘
```

---

## 🔄 Real-time Features

### Live Schedule Updates
```typescript
interface ScheduleUpdate {
  type: 'shift_assigned' | 'shift_cancelled' | 'shift_modified' | 'payment_processed';
  shiftId: number;
  changes: ShiftChanges;
  timestamp: Date;
  urgent: boolean;
}

interface ShiftChanges {
  startTime?: Date;
  endTime?: Date;
  location?: string;
  rate?: number;
  status?: ShiftStatus;
  instructions?: string;
}
```

### Real-time Notifications
- **Nieuwe shifts**: Instant melding van toewijzingen
- **Schedule wijzigingen**: Live updates bij tijd/locatie wijzigingen
- **CAO warnings**: Alert bij potentiële overtredingen
- **Payment confirmations**: Bevestiging van Finqle betalingen

---

## 📊 CAO Compliance Monitoring

### Automated Compliance Checks
```typescript
interface CAOCompliance {
  dailyRest: {
    minimum: 11; // uren tussen shifts
    current: number;
    compliant: boolean;
  };
  weeklyRest: {
    minimum: 35; // uur aaneengesloten rust per week
    current: number;
    compliant: boolean;
  };
  maxWorkDay: {
    maximum: 8; // uur per dag (met uitzonderingen)
    current: number;
    compliant: boolean;
  };
  maxWorkWeek: {
    maximum: 48; // uur per week gemiddeld over 4 weken
    current: number;
    compliant: boolean;
  };
}
```

### Compliance Alerts
- **Rust periode waarschuwingen**: 24h vooraf bij korte rust
- **Maximale werkdag alerts**: Stop bij 8 uur limiet
- **Wekelijkse limiet tracking**: Automatisch bijhouden 48u limiet
- **Maandelijks compliance rapport**: Volledig overzicht voor administratie

---

## 💾 Data Requirements

### Planning API Endpoints
```typescript
// Get schedule for period
GET /api/zzp/schedule?period={week|month}&date={ISO-date}
{
  shifts: ScheduledShift[],
  availability: AvailabilitySlot[],
  caorCompliance: CAOCompliance,
  statistics: PeriodStatistics
}

// Update availability
PUT /api/zzp/availability
{
  slots: AvailabilitySlot[],
  preferences: AvailabilityPreferences
}

// Calendar export
GET /api/zzp/schedule/export?format={ical|csv}

// Performance metrics
GET /api/zzp/performance?period={month|quarter|year}
```

### Database Schema Used
- **shifts** (professionalId, startDatetime, endDatetime, status)
- **availability** (professionalId, startTime, endTime, preferences)
- **gpsCheckins** (shiftId, professionalId, createdAt)
- **finqleTransactions** (professionalId, shiftId, amount, status)

---

## 📱 Calendar Integration

### Native Calendar Sync
```typescript
interface CalendarEvent {
  id: string;
  title: string;
  startDate: Date;
  endDate: Date;
  location: string;
  description: string;
  alerts: CalendarAlert[];
  url: string; // Deep link naar app
}
```

### Export Features
- **iCal export**: Volledige planning naar Outlook/Google Calendar
- **CSV export**: Data export voor administratie
- **PDF export**: Print-vriendelijk planning overzicht
- **Share functionality**: Planning delen met familie/vrienden

---

## 🎯 Performance Analytics

### KPI Tracking
```typescript
interface PerformanceMetrics {
  punctuality: {
    onTimeCheckIns: number;
    totalCheckIns: number;
    percentage: number;
    trend: 'improving' | 'stable' | 'declining';
  };
  reliability: {
    completedShifts: number;
    totalAssigned: number;
    cancellations: number;
    noShows: number;
  };
  earnings: {
    totalEarned: number;
    averageHourlyRate: number;
    hoursWorked: number;
    trend: number; // percentage change
  };
  customerSatisfaction: {
    averageRating: number;
    totalRatings: number;
    recentFeedback: string[];
  };
}
```

### Benchmarking
- **Peer comparison**: Ranking tegen andere ZZP'ers
- **Industry standards**: Vergelijking met sector gemiddelden
- **Personal bests**: Tracking van persoonlijke records
- **Improvement suggestions**: AI-powered aanbevelingen voor betere performance

---

## 🔒 Privacy & Data Security

### Data Protection
- **Schedule privacy**: Alleen eigen planning zichtbaar
- **Location privacy**: GPS data encrypted en tijdelijk opgeslagen
- **Performance data**: Anonimized benchmarking
- **Export control**: Gebruiker controle over data export

### GDPR Compliance
- **Data retention**: Planning data automatisch gearchiveerd na 7 jaar
- **Right to deletion**: Volledige verwijdering op verzoek
- **Data portability**: Export in machine-readable formaten
- **Consent management**: Granular control over data usage

---

## 📊 Success Metrics

### Performance Targets
- **Schedule load time**: < 1 seconde voor week overzicht
- **Calendar sync**: < 30 seconden voor volledige export
- **Real-time updates**: < 50ms latency voor wijzigingen
- **CAO calculations**: Real-time compliance checking

### User Experience Metrics
- **Planning engagement**: Tijd besteed in planning sectie
- **Calendar usage**: % gebruikers die sync gebruiken
- **Availability completion**: % van ingestelde beschikbaarheid
- **Schedule accuracy**: % correcte shift voorspellingen